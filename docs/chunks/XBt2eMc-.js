(function(){"use strict";var k=(n=>(n.JPG="jpg",n.JSON="json",n.MP3="mp3",n.PNG="png",n.SVG="svg",n.WAV="wav",n.GIF="gif",n))(k||{});function ar(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var b={exports:{}};(function(n,s){(function(c){n.exports=c()})(function(c){var m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function f(o,i){var e=o[0],r=o[1],a=o[2],t=o[3];e+=(r&a|~r&t)+i[0]-680876936|0,e=(e<<7|e>>>25)+r|0,t+=(e&r|~e&a)+i[1]-389564586|0,t=(t<<12|t>>>20)+e|0,a+=(t&e|~t&r)+i[2]+606105819|0,a=(a<<17|a>>>15)+t|0,r+=(a&t|~a&e)+i[3]-1044525330|0,r=(r<<22|r>>>10)+a|0,e+=(r&a|~r&t)+i[4]-176418897|0,e=(e<<7|e>>>25)+r|0,t+=(e&r|~e&a)+i[5]+1200080426|0,t=(t<<12|t>>>20)+e|0,a+=(t&e|~t&r)+i[6]-1473231341|0,a=(a<<17|a>>>15)+t|0,r+=(a&t|~a&e)+i[7]-45705983|0,r=(r<<22|r>>>10)+a|0,e+=(r&a|~r&t)+i[8]+1770035416|0,e=(e<<7|e>>>25)+r|0,t+=(e&r|~e&a)+i[9]-1958414417|0,t=(t<<12|t>>>20)+e|0,a+=(t&e|~t&r)+i[10]-42063|0,a=(a<<17|a>>>15)+t|0,r+=(a&t|~a&e)+i[11]-1990404162|0,r=(r<<22|r>>>10)+a|0,e+=(r&a|~r&t)+i[12]+1804603682|0,e=(e<<7|e>>>25)+r|0,t+=(e&r|~e&a)+i[13]-40341101|0,t=(t<<12|t>>>20)+e|0,a+=(t&e|~t&r)+i[14]-1502002290|0,a=(a<<17|a>>>15)+t|0,r+=(a&t|~a&e)+i[15]+1236535329|0,r=(r<<22|r>>>10)+a|0,e+=(r&t|a&~t)+i[1]-165796510|0,e=(e<<5|e>>>27)+r|0,t+=(e&a|r&~a)+i[6]-1069501632|0,t=(t<<9|t>>>23)+e|0,a+=(t&r|e&~r)+i[11]+643717713|0,a=(a<<14|a>>>18)+t|0,r+=(a&e|t&~e)+i[0]-373897302|0,r=(r<<20|r>>>12)+a|0,e+=(r&t|a&~t)+i[5]-701558691|0,e=(e<<5|e>>>27)+r|0,t+=(e&a|r&~a)+i[10]+38016083|0,t=(t<<9|t>>>23)+e|0,a+=(t&r|e&~r)+i[15]-660478335|0,a=(a<<14|a>>>18)+t|0,r+=(a&e|t&~e)+i[4]-405537848|0,r=(r<<20|r>>>12)+a|0,e+=(r&t|a&~t)+i[9]+568446438|0,e=(e<<5|e>>>27)+r|0,t+=(e&a|r&~a)+i[14]-1019803690|0,t=(t<<9|t>>>23)+e|0,a+=(t&r|e&~r)+i[3]-187363961|0,a=(a<<14|a>>>18)+t|0,r+=(a&e|t&~e)+i[8]+1163531501|0,r=(r<<20|r>>>12)+a|0,e+=(r&t|a&~t)+i[13]-1444681467|0,e=(e<<5|e>>>27)+r|0,t+=(e&a|r&~a)+i[2]-51403784|0,t=(t<<9|t>>>23)+e|0,a+=(t&r|e&~r)+i[7]+1735328473|0,a=(a<<14|a>>>18)+t|0,r+=(a&e|t&~e)+i[12]-1926607734|0,r=(r<<20|r>>>12)+a|0,e+=(r^a^t)+i[5]-378558|0,e=(e<<4|e>>>28)+r|0,t+=(e^r^a)+i[8]-2022574463|0,t=(t<<11|t>>>21)+e|0,a+=(t^e^r)+i[11]+1839030562|0,a=(a<<16|a>>>16)+t|0,r+=(a^t^e)+i[14]-35309556|0,r=(r<<23|r>>>9)+a|0,e+=(r^a^t)+i[1]-1530992060|0,e=(e<<4|e>>>28)+r|0,t+=(e^r^a)+i[4]+1272893353|0,t=(t<<11|t>>>21)+e|0,a+=(t^e^r)+i[7]-155497632|0,a=(a<<16|a>>>16)+t|0,r+=(a^t^e)+i[10]-1094730640|0,r=(r<<23|r>>>9)+a|0,e+=(r^a^t)+i[13]+681279174|0,e=(e<<4|e>>>28)+r|0,t+=(e^r^a)+i[0]-358537222|0,t=(t<<11|t>>>21)+e|0,a+=(t^e^r)+i[3]-722521979|0,a=(a<<16|a>>>16)+t|0,r+=(a^t^e)+i[6]+76029189|0,r=(r<<23|r>>>9)+a|0,e+=(r^a^t)+i[9]-640364487|0,e=(e<<4|e>>>28)+r|0,t+=(e^r^a)+i[12]-421815835|0,t=(t<<11|t>>>21)+e|0,a+=(t^e^r)+i[15]+530742520|0,a=(a<<16|a>>>16)+t|0,r+=(a^t^e)+i[2]-995338651|0,r=(r<<23|r>>>9)+a|0,e+=(a^(r|~t))+i[0]-198630844|0,e=(e<<6|e>>>26)+r|0,t+=(r^(e|~a))+i[7]+1126891415|0,t=(t<<10|t>>>22)+e|0,a+=(e^(t|~r))+i[14]-1416354905|0,a=(a<<15|a>>>17)+t|0,r+=(t^(a|~e))+i[5]-57434055|0,r=(r<<21|r>>>11)+a|0,e+=(a^(r|~t))+i[12]+1700485571|0,e=(e<<6|e>>>26)+r|0,t+=(r^(e|~a))+i[3]-1894986606|0,t=(t<<10|t>>>22)+e|0,a+=(e^(t|~r))+i[10]-1051523|0,a=(a<<15|a>>>17)+t|0,r+=(t^(a|~e))+i[1]-2054922799|0,r=(r<<21|r>>>11)+a|0,e+=(a^(r|~t))+i[8]+1873313359|0,e=(e<<6|e>>>26)+r|0,t+=(r^(e|~a))+i[15]-30611744|0,t=(t<<10|t>>>22)+e|0,a+=(e^(t|~r))+i[6]-1560198380|0,a=(a<<15|a>>>17)+t|0,r+=(t^(a|~e))+i[13]+1309151649|0,r=(r<<21|r>>>11)+a|0,e+=(a^(r|~t))+i[4]-145523070|0,e=(e<<6|e>>>26)+r|0,t+=(r^(e|~a))+i[11]-1120210379|0,t=(t<<10|t>>>22)+e|0,a+=(e^(t|~r))+i[2]+718787259|0,a=(a<<15|a>>>17)+t|0,r+=(t^(a|~e))+i[9]-343485551|0,r=(r<<21|r>>>11)+a|0,o[0]=e+o[0]|0,o[1]=r+o[1]|0,o[2]=a+o[2]|0,o[3]=t+o[3]|0}function l(o){var i=[],e;for(e=0;e<64;e+=4)i[e>>2]=o.charCodeAt(e)+(o.charCodeAt(e+1)<<8)+(o.charCodeAt(e+2)<<16)+(o.charCodeAt(e+3)<<24);return i}function g(o){var i=[],e;for(e=0;e<64;e+=4)i[e>>2]=o[e]+(o[e+1]<<8)+(o[e+2]<<16)+(o[e+3]<<24);return i}function d(o){var i=o.length,e=[1732584193,-271733879,-1732584194,271733878],r,a,t,p,U,S;for(r=64;r<=i;r+=64)f(e,l(o.substring(r-64,r)));for(o=o.substring(r-64),a=o.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<a;r+=1)t[r>>2]|=o.charCodeAt(r)<<(r%4<<3);if(t[r>>2]|=128<<(r%4<<3),r>55)for(f(e,t),r=0;r<16;r+=1)t[r]=0;return p=i*8,p=p.toString(16).match(/(.*?)(.{0,8})$/),U=parseInt(p[2],16),S=parseInt(p[1],16)||0,t[14]=U,t[15]=S,f(e,t),e}function x(o){var i=o.length,e=[1732584193,-271733879,-1732584194,271733878],r,a,t,p,U,S;for(r=64;r<=i;r+=64)f(e,g(o.subarray(r-64,r)));for(o=r-64<i?o.subarray(r-64):new Uint8Array(0),a=o.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<a;r+=1)t[r>>2]|=o[r]<<(r%4<<3);if(t[r>>2]|=128<<(r%4<<3),r>55)for(f(e,t),r=0;r<16;r+=1)t[r]=0;return p=i*8,p=p.toString(16).match(/(.*?)(.{0,8})$/),U=parseInt(p[2],16),S=parseInt(p[1],16)||0,t[14]=U,t[15]=S,f(e,t),e}function _(o){var i="",e;for(e=0;e<4;e+=1)i+=m[o>>e*8+4&15]+m[o>>e*8&15];return i}function v(o){var i;for(i=0;i<o.length;i+=1)o[i]=_(o[i]);return o.join("")}v(d("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function o(i,e){return i=i|0||0,i<0?Math.max(i+e,0):Math.min(i,e)}ArrayBuffer.prototype.slice=function(i,e){var r=this.byteLength,a=o(i,r),t=r,p,U,S,C;return e!==c&&(t=o(e,r)),a>t?new ArrayBuffer(0):(p=t-a,U=new ArrayBuffer(p),S=new Uint8Array(U),C=new Uint8Array(this,a,p),S.set(C),U)}}();function u(o){return/[\u0080-\uFFFF]/.test(o)&&(o=unescape(encodeURIComponent(o))),o}function A(o,i){var e=o.length,r=new ArrayBuffer(e),a=new Uint8Array(r),t;for(t=0;t<e;t+=1)a[t]=o.charCodeAt(t);return i?a:r}function I(o){return String.fromCharCode.apply(null,new Uint8Array(o))}function B(o,i,e){var r=new Uint8Array(o.byteLength+i.byteLength);return r.set(new Uint8Array(o)),r.set(new Uint8Array(i),o.byteLength),e?r:r.buffer}function w(o){var i=[],e=o.length,r;for(r=0;r<e-1;r+=2)i.push(parseInt(o.substr(r,2),16));return String.fromCharCode.apply(String,i)}function h(){this.reset()}return h.prototype.append=function(o){return this.appendBinary(u(o)),this},h.prototype.appendBinary=function(o){this._buff+=o,this._length+=o.length;var i=this._buff.length,e;for(e=64;e<=i;e+=64)f(this._hash,l(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},h.prototype.end=function(o){var i=this._buff,e=i.length,r,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t;for(r=0;r<e;r+=1)a[r>>2]|=i.charCodeAt(r)<<(r%4<<3);return this._finish(a,e),t=v(this._hash),o&&(t=w(t)),this.reset(),t},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},h.prototype.setState=function(o){return this._buff=o.buff,this._length=o.length,this._hash=o.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(o,i){var e=i,r,a,t;if(o[e>>2]|=128<<(e%4<<3),e>55)for(f(this._hash,o),e=0;e<16;e+=1)o[e]=0;r=this._length*8,r=r.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(r[2],16),t=parseInt(r[1],16)||0,o[14]=a,o[15]=t,f(this._hash,o)},h.hash=function(o,i){return h.hashBinary(u(o),i)},h.hashBinary=function(o,i){var e=d(o),r=v(e);return i?w(r):r},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(o){var i=B(this._buff.buffer,o,!0),e=i.length,r;for(this._length+=o.byteLength,r=64;r<=e;r+=64)f(this._hash,g(i.subarray(r-64,r)));return this._buff=r-64<e?new Uint8Array(i.buffer.slice(r-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(o){var i=this._buff,e=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a,t;for(a=0;a<e;a+=1)r[a>>2]|=i[a]<<(a%4<<3);return this._finish(r,e),t=v(this._hash),o&&(t=w(t)),this.reset(),t},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var o=h.prototype.getState.call(this);return o.buff=I(o.buff),o},h.ArrayBuffer.prototype.setState=function(o){return o.buff=A(o.buff,!0),h.prototype.setState.call(this,o)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(o,i){var e=x(new Uint8Array(o)),r=v(e);return i?w(r):r},h})})(b);var nr=b.exports,ir=ar(nr),rr={},er,or;function fr(n,s,c,l){var f=0,l=l===void 0?{}:l,g=l.loop===void 0?null:l.loop,d=l.palette===void 0?null:l.palette;if(s<=0||c<=0||s>65535||c>65535)throw new Error("Width/Height invalid.");function x(h){var o=h.length;if(o<2||o>256||o&o-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return o}n[f++]=71,n[f++]=73,n[f++]=70,n[f++]=56,n[f++]=57,n[f++]=97;var _=0,v=0;if(d!==null){for(var u=x(d);u>>=1;)++_;if(u=1<<_,--_,l.background!==void 0){if(v=l.background,v>=u)throw new Error("Background index out of range.");if(v===0)throw new Error("Background index explicitly passed as 0.")}}if(n[f++]=s&255,n[f++]=s>>8&255,n[f++]=c&255,n[f++]=c>>8&255,n[f++]=(d!==null?128:0)|_,n[f++]=v,n[f++]=0,d!==null)for(var A=0,I=d.length;A<I;++A){var B=d[A];n[f++]=B>>16&255,n[f++]=B>>8&255,n[f++]=B&255}if(g!==null){if(g<0||g>65535)throw new Error("Loop count invalid.");n[f++]=33,n[f++]=255,n[f++]=11,n[f++]=78,n[f++]=69,n[f++]=84,n[f++]=83,n[f++]=67,n[f++]=65,n[f++]=80,n[f++]=69,n[f++]=50,n[f++]=46,n[f++]=48,n[f++]=3,n[f++]=1,n[f++]=g&255,n[f++]=g>>8&255,n[f++]=0}var w=!1;this.addFrame=function(h,o,i,e,r,a){if(w===!0&&(--f,w=!1),a=a===void 0?{}:a,h<0||o<0||h>65535||o>65535)throw new Error("x/y invalid.");if(i<=0||e<=0||i>65535||e>65535)throw new Error("Width/Height invalid.");if(r.length<i*e)throw new Error("Not enough pixels for the frame size.");var t=!0,p=a.palette;if(p==null&&(t=!1,p=d),p==null)throw new Error("Must supply either a local or global palette.");for(var U=x(p),S=0;U>>=1;)++S;U=1<<S;var C=a.delay===void 0?0:a.delay,R=a.disposal===void 0?0:a.disposal;if(R<0||R>3)throw new Error("Disposal out of range.");var H=!1,W=0;if(a.transparent!==void 0&&a.transparent!==null&&(H=!0,W=a.transparent,W<0||W>=U))throw new Error("Transparent color index.");if((R!==0||H||C!==0)&&(n[f++]=33,n[f++]=249,n[f++]=4,n[f++]=R<<2|(H===!0?1:0),n[f++]=C&255,n[f++]=C>>8&255,n[f++]=W,n[f++]=0),n[f++]=44,n[f++]=h&255,n[f++]=h>>8&255,n[f++]=o&255,n[f++]=o>>8&255,n[f++]=i&255,n[f++]=i>>8&255,n[f++]=e&255,n[f++]=e>>8&255,n[f++]=t===!0?128|S-1:0,t===!0)for(var J=0,F=p.length;J<F;++J){var G=p[J];n[f++]=G>>16&255,n[f++]=G>>8&255,n[f++]=G&255}return f=sr(n,f,S<2?2:S,r),f},this.end=function(){return w===!1&&(n[f++]=59,w=!0),f},this.getOutputBuffer=function(){return n},this.setOutputBuffer=function(h){n=h},this.getOutputBufferPosition=function(){return f},this.setOutputBufferPosition=function(h){f=h}}function sr(n,s,c,m){n[s++]=c;var f=s++,l=1<<c,g=l-1,d=l+1,x=d+1,_=c+1,v=0,u=0;function A(a){for(;v>=a;)n[s++]=u&255,u>>=8,v-=8,s===f+256&&(n[f]=255,f=s++)}function I(a){u|=a<<v,v+=_,A(8)}var B=m[0]&g,w={};I(l);for(var h=1,o=m.length;h<o;++h){var i=m[h]&g,e=B<<8|i,r=w[e];if(r===void 0){for(u|=B<<v,v+=_;v>=8;)n[s++]=u&255,u>>=8,v-=8,s===f+256&&(n[f]=255,f=s++);x===4096?(I(l),x=d+1,_=c+1,w={}):(x>=1<<_&&++_,w[e]=x++),B=i}else B=r}return I(B),I(d),A(1),f+1===s?n[f]=0:(n[f]=s-f-1,n[s++]=0),s}function hr(n){var s=0;if(n[s++]!==71||n[s++]!==73||n[s++]!==70||n[s++]!==56||(n[s++]+1&253)!==56||n[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var c=n[s++]|n[s++]<<8,m=n[s++]|n[s++]<<8,f=n[s++],l=f>>7,g=f&7,d=1<<g+1;n[s++],n[s++];var x=null,_=null;l&&(x=s,_=d,s+=d*3);var v=!0,u=[],A=0,I=null,B=0,w=null;for(this.width=c,this.height=m;v&&s<n.length;)switch(n[s++]){case 33:switch(n[s++]){case 255:if(n[s]!==11||n[s+1]==78&&n[s+2]==69&&n[s+3]==84&&n[s+4]==83&&n[s+5]==67&&n[s+6]==65&&n[s+7]==80&&n[s+8]==69&&n[s+9]==50&&n[s+10]==46&&n[s+11]==48&&n[s+12]==3&&n[s+13]==1&&n[s+16]==0)s+=14,w=n[s++]|n[s++]<<8,s++;else for(s+=12;;){var h=n[s++];if(!(h>=0))throw Error("Invalid block size");if(h===0)break;s+=h}break;case 249:if(n[s++]!==4||n[s+4]!==0)throw new Error("Invalid graphics extension block.");var o=n[s++];A=n[s++]|n[s++]<<8,I=n[s++],o&1||(I=null),B=o>>2&7,s++;break;case 254:for(;;){var h=n[s++];if(!(h>=0))throw Error("Invalid block size");if(h===0)break;s+=h}break;default:throw new Error("Unknown graphic control label: 0x"+n[s-1].toString(16))}break;case 44:var i=n[s++]|n[s++]<<8,e=n[s++]|n[s++]<<8,r=n[s++]|n[s++]<<8,a=n[s++]|n[s++]<<8,t=n[s++],p=t>>7,U=t>>6&1,S=t&7,C=1<<S+1,R=x,H=_,W=!1;if(p){var W=!0;R=s,H=C,s+=C*3}var J=s;for(s++;;){var h=n[s++];if(!(h>=0))throw Error("Invalid block size");if(h===0)break;s+=h}u.push({x:i,y:e,width:r,height:a,has_local_palette:W,palette_offset:R,palette_size:H,data_offset:J,data_length:s-J,transparent_index:I,interlaced:!!U,delay:A,disposal:B});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+n[s-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return w},this.frameInfo=function(F){if(F<0||F>=u.length)throw new Error("Frame index out of range.");return u[F]},this.decodeAndBlitFrameBGRA=function(F,G){var y=this.frameInfo(F),V=y.width*y.height,L=new Uint8Array(V);tr(n,y.data_offset,L,V);var D=y.palette_offset,P=y.transparent_index;P===null&&(P=256);var M=y.width,j=c-M,z=M,Z=(y.y*c+y.x)*4,q=((y.y+y.height)*c+y.x)*4,E=Z,N=j*4;y.interlaced===!0&&(N+=c*4*7);for(var T=8,$=0,K=L.length;$<K;++$){var O=L[$];if(z===0&&(E+=N,z=M,E>=q&&(N=j*4+c*4*(T-1),E=Z+(M+j)*(T<<1),T>>=1)),O===P)E+=4;else{var Q=n[D+O*3],X=n[D+O*3+1],Y=n[D+O*3+2];G[E++]=Y,G[E++]=X,G[E++]=Q,G[E++]=255}--z}},this.decodeAndBlitFrameRGBA=function(F,G){var y=this.frameInfo(F),V=y.width*y.height,L=new Uint8Array(V);tr(n,y.data_offset,L,V);var D=y.palette_offset,P=y.transparent_index;P===null&&(P=256);var M=y.width,j=c-M,z=M,Z=(y.y*c+y.x)*4,q=((y.y+y.height)*c+y.x)*4,E=Z,N=j*4;y.interlaced===!0&&(N+=c*4*7);for(var T=8,$=0,K=L.length;$<K;++$){var O=L[$];if(z===0&&(E+=N,z=M,E>=q&&(N=j*4+c*4*(T-1),E=Z+(M+j)*(T<<1),T>>=1)),O===P)E+=4;else{var Q=n[D+O*3],X=n[D+O*3+1],Y=n[D+O*3+2];G[E++]=Q,G[E++]=X,G[E++]=Y,G[E++]=255}--z}}}function tr(n,s,c,m){for(var f=n[s++],l=1<<f,g=l+1,d=g+1,x=f+1,_=(1<<x)-1,v=0,u=0,A=0,I=n[s++],B=new Int32Array(4096),w=null;;){for(;v<16&&I!==0;)u|=n[s++]<<v,v+=8,I===1?I=n[s++]:--I;if(v<x)break;var h=u&_;if(u>>=x,v-=x,h===l){d=g+1,x=f+1,_=(1<<x)-1,w=null;continue}else if(h===g)break;for(var o=h<d?h:w,i=0,e=o;e>l;)e=B[e]>>8,++i;var r=e,a=A+i+(o!==h?1:0);if(a>m)return;c[A++]=r,A+=i;var t=A;for(o!==h&&(c[A++]=r),e=o;i--;)e=B[e],c[--t]=e&255,e>>=8;w!==null&&d<4096&&(B[d++]=w<<8|r,d>=_+1&&x<12&&(++x,_=_<<1|1)),w=h}return c}try{or=rr.GifWriter=fr,er=rr.GifReader=hr}catch{}function lr(n){return createImageBitmap(n,0,0,n.width,n.height)}class cr{static async fromBuffer(s,c=!1){const m=new er(new Uint8Array(s)),f=m.numFrames(),l=new OffscreenCanvas(m.width,m.height),g=l.getContext("2d",{willReadFrequently:!0});l.width=m.width,l.height=m.height;let d=g.createImageData(l.width,l.height),x=g.createImageData(l.width,l.height);const _=[];let v=0;for(;v<f;){const u=[];m.decodeAndBlitFrameRGBA(v,u);const{x:A,y:I,width:B,height:w,disposal:h}=m.frameInfo(v);for(let e=0;e<w;e++)for(let r=0;r<B;r++){const t=4*(A+I*l.width)+4*(r+e*l.width);u[t+3]&&(d.data[t+0]=u[t+0],d.data[t+1]=u[t+1],d.data[t+2]=u[t+2],d.data[t+3]=u[t+3])}g.clearRect(0,0,l.width,l.height),g.putImageData(d,0,0);const o=await lr(d);let i;switch(c&&(i=ir.ArrayBuffer.hash(d.data.buffer)),_.push({imageBitmap:o,hash:i}),h){case 2:g.clearRect(A,I,B,w),d=g.getImageData(0,0,l.width,l.height);break;case 3:d=g.createImageData(l.width,l.height),d.data.set(x.data);break;default:{x=g.getImageData(0,0,l.width,l.height);const e=new ImageData(l.width,l.height);e.data.set(d.data),d=e;break}}v++}return _}}async function dr(n){const s=await n.arrayBuffer();return(await cr.fromBuffer(s,!0)).map(({imageBitmap:m,hash:f})=>({hash:f,data:m,format:k.PNG}))}const vr={decodeGifFile:dr};self.addEventListener("message",async n=>{const{method:s,id:c,args:m}=n.data;try{const f=vr[s];if(!f){self.postMessage({id:c,error:new Error("unsupported method "+s)});return}const l=await f.call(null,...m);self.postMessage({id:c,result:l})}catch(f){self.postMessage({id:c,error:f})}})})();
